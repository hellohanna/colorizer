{% extends 'base.html' %}
{% block content %}


<div class="my-container">
    <img src="{{ s3_url_for(filename=photo.original_photo) }}"" id="img-processing">
    <button type="button" id="process-button">Colorize</button>
</div>



<script>
    "use strict";

    function replaceImage(results) {
        $( ".loader" ).remove();
        $('#img-processing').attr("src", results);
        console.log("Finished replaceStatus");
        var a = document.createElement('a');
        var linkText = document.createTextNode("Download");
        a.appendChild(linkText);
        a.title = "Download";
        a.setAttribute('download', results);
        a.href = results;

        document.body.appendChild(a);

    }

    function processImage() {
        $.post('/process/{{ photo.photo_id }}', replaceImage);
        console.log("Finished sending AJAX");
        var div = document.createElement("div");
        div.setAttribute("class", "loader");
        document.body.appendChild(div);
    }

    $('#process-button').on('click', processImage);


</script>



{%endblock%}